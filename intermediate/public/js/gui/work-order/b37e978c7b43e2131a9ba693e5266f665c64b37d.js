var getWorkCenterGroupsJSON;getWorkCenterGroupsJSON=$(".workCenterGroupsJSON").html();getWorkCenterGroupsJSON=(getWorkCenterGroupsJSON.length>1)?$.parseJSON(getWorkCenterGroupsJSON):"";workCenterGroupJSON=false;$(".applyHistoricWorkCenterGroups").live("click",function(k){k.preventDefault();var o=["blue","red","green","purple","orange"];var q={};var j=0;var c=$(".sectionHeader").attr("runReport");var a=$(".sectionHeader").attr("runWorkCenters");var m=parseInt(a);var b=(c==="WO1002RG")?"WO1002RG":false;var d=(c==="WO1010RG")?"WO1010RG":b;var l=d;var f=[];var h={};var p=[];var r={};var e;var n=false;$("table").find("tbody").find("tr").each(function(s,t){$(this).removeAttr("class")});workCenterGroupJSON=getWorkCenterGroupsJSON;if(workCenterGroupJSON.data&&workCenterGroupJSON.data.length>=1){console.log("i have length");$.each(workCenterGroupJSON.data,function(s,u){var x=u.wcg_id;var w=u.cwwcid;var v=u.wcg_staffing*formula;var t=parseInt(p.indexOf(x))==0;if(!t){p.push(x);r[x]={labor:v}}f.push(w);h[w]={group:x,labor:v}});if(l){var e=false;var i=false;if(l==="WO1010RG"){e="td:nth-child(3)";i="td:nth-child(9)"}if(e){$("table").find("tbody").find("tr").find(e).each(function(v,y){var z=$.trim(y.innerHTML).toString();var t=parseFloat($(this).closest("tr").find(i).html());var w=parseInt($.inArray(z,f))>=0;if(w){var s=h[z].group;var u=r[s].labor;var x=u-=t;x=parseFloat(x).toFixed(2);if(r[s].breakPoint){$(this).closest("tr").attr("class","blur")}else{$(".remainingProductionHoursMessage").css("display","none");if(x>=0){r[s].labor-=t;r[s].labor=parseFloat(r[s].labor).toFixed(2);h[z].labor-=t;h[z].labor=parseFloat(h[z].labor).toFixed(2)}else{r[s].breakPoint=true;$(this).closest("tr").attr("class","blueBreak blur").css("border-color",o[j]);q[s]={color:o[j]};j++}}}})}}var g=false;$.each(r,function(t,v){var s=!(q[t]==undefined)?q[t].color:"transparent";if(s){g=true}var u=$("<li>").attr("group_id",t).html('<span style="background:'+s+';float:left;height:15px;width:20px;margin-right:5px"></span>Group <span class="bold underlined">'+t+'</span> : <span class="bold underlined">'+v.labor+"</span> avail. production hours.");$(".appliedWorkCenterGroupData").find("ul:nth-child(1)").append(u)});$(".appliedWorkCenterGroupData").css("display",g?"block":"none")}});$(".applyHistoricWorkCenterGroups").click();